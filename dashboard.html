<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ZipZapZoi Dashboard</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<script>
tailwind.config = {
  darkMode: "class",
  theme: {
    extend: {
      colors: {
        primary: "#F97316",
        "background-light": "#F8FAFC",
        "background-dark": "#1E293B",
        "text-light": "#1E293B",
        "text-dark": "#F8FAFC"
      },
      fontFamily: { display: ["Poppins", "sans-serif"] },
      borderRadius: { DEFAULT: "1.5rem", "2xl": "2rem", "3xl": "2.5rem" },
    },
  },
};
</script>

<style>
/* --- ORIGINAL DASHBOARD STYLES --- */
body { overflow-x: hidden; height: 100vh; width: 100vw; min-height: max(884px, 100dvh); }
@keyframes slide-in-up {
  0% { opacity: 0; transform: translateY(40px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes logo-bounce {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-20px) scale(1.1); }
}
.animate-logo-bounce { animation: logo-bounce 2s infinite; }
.animate-slide-in-up { animation: slide-in-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) both; }
.card-shadow { box-shadow: 0px 10px 20px rgba(0,0,0,0.1), inset 0px -8px 15px rgba(0,0,0,0.05), 0px 30px 60px -12px rgba(0,0,0,0.2); }
.dark .card-shadow { box-shadow: 0px 10px 20px rgba(0,0,0,0.3), inset 0px -8px 15px rgba(0,0,0,0.2), 0px 30px 60px -12px rgba(0,0,0,0.4); }
.card { transition: all 0.4s cubic-bezier(0.175,0.885,0.32,1.275); transform-style: preserve-3d; perspective: 1000px; }
.card:hover { transform: translateY(-15px) scale(1.08) rotateX(10deg) rotateY(5deg); box-shadow: 0px 25px 40px rgba(0,0,0,0.2), inset 0px -8px 15px rgba(0,0,0,0.1), 0px 50px 80px -20px rgba(0,0,0,0.3); }
.card:active { transform: translateY(-5px) scale(1.02); transition: all 0.2s ease; }
@keyframes card-bounce-in {
  0% { opacity: 0; transform: translateY(50px) scale(0.8); }
  60% { opacity: 1; transform: translateY(-15px) scale(1.05); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}
.animate-card-bounce-in { animation: card-bounce-in 1s cubic-bezier(0.34,1.56,0.64,1) both; }

/* --- VIDEO OVERLAY STYLES --- */
.overlay {
    height: 100%;
    width: 100%;
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    background-color: #000;
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}
#videoWrapper { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
video { width: 100%; max-height: 100vh; object-fit: contain; outline: none; }
.closebtn { position: absolute; top: 20px; right: 40px; font-size: 50px; color: rgba(255,255,255,0.5); text-decoration: none; cursor: pointer; z-index: 10001; transition: color 0.3s; }
.closebtn:hover { color: #fff; }
.overlay-content { position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
#messageContainer { color: white; font-family: 'Poppins', sans-serif; animation: fadeIn 1s ease-in; padding: 20px; text-align: center; display: none; z-index: 10002; }
#dynamicTitle { font-size: 40px; font-weight: 700; color: #F97316; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 2px; }
.sub-text { font-size: 20px; color: #cbd5e1; margin-bottom: 40px; }
.action-btn { padding: 15px 35px; margin: 0 10px; font-size: 18px; border: none; border-radius: 50px; cursor: pointer; font-weight: 600; transition: transform 0.2s; }
.action-btn:hover { transform: scale(1.05); }
.btn-close { background-color: white; color: black; }
.btn-replay { background-color: #333; color: white; border: 1px solid #555; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
</style>
<script src="js/data-manager.js"></script>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-text-light dark:text-text-dark transition-colors duration-300">

<nav class="w-full flex justify-between items-center px-6 py-4 bg-white/80 dark:bg-background-dark/80 backdrop-blur-lg shadow-bouncy sticky top-0 z-50">
  <div class="flex items-center gap-2">
    <span class="material-icons text-primary text-4xl animate-logo-bounce">bolt</span>
    <h1 class="text-2xl font-bold text-dark-charcoal dark:text-white tracking-tight">ZipZapZoi</h1>
  </div>
  
  <div id="navAuthArea" class="flex items-center gap-4">
    </div>
</nav>

<div class="h-[calc(100vh-80px)] w-screen flex flex-col items-center justify-center p-4">
  <main class="flex-grow flex flex-col items-center justify-center w-full max-w-6xl mx-auto px-4">
    <div class="text-center mb-8 animate-slide-in-up">
      <h1 id="welcomeTitle" class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2">Welcome!</h1>
      <p class="text-base text-gray-600 dark:text-gray-400">What's your next adventure?</p>
    </div>

    <div class="grid grid-cols-2 lg:grid-cols-3 gap-6 w-full">
      
      <a href="Classifieds LandingPage.html" class="card animate-card-bounce-in card-shadow rounded-3xl bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900/50 dark:to-blue-800/50 p-6 flex flex-col items-start justify-between cursor-pointer group">
        <div>
          <div class="w-16 h-16 rounded-2xl bg-blue-500 text-white flex items-center justify-center mb-4 shadow-lg group-hover:scale-110 transition-transform">
            <span class="material-icons text-4xl">storefront</span>
          </div>
          <h2 class="text-xl font-bold text-blue-800 dark:text-blue-200">Classifieds</h2>
          <p class="text-blue-600 dark:text-blue-300 mt-1 text-sm">Find & manage listings.</p>
        </div>
      </a>

      <div onclick="openVideo('Food Delivery')" class="card animate-card-bounce-in card-shadow rounded-3xl bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/50 dark:to-green-800/50 p-6 flex flex-col items-start justify-between cursor-pointer group">
        <div>
          <div class="w-16 h-16 rounded-2xl bg-green-500 text-white flex items-center justify-center mb-4 shadow-lg group-hover:scale-110 transition-transform">
            <span class="material-icons text-4xl">restaurant</span>
          </div>
          <h2 class="text-xl font-bold text-green-800 dark:text-green-200">Food Delivery</h2>
          <p class="text-green-600 dark:text-green-300 mt-1 text-sm">Meals to your door.</p>
        </div>
      </div>

      <div onclick="openVideo('Drive Services')" class="card animate-card-bounce-in card-shadow rounded-3xl bg-gradient-to-br from-indigo-100 to-indigo-200 dark:from-indigo-900/50 dark:to-indigo-800/50 p-6 flex flex-col items-start justify-between cursor-pointer group">
        <div>
          <div class="w-16 h-16 rounded-2xl bg-indigo-500 text-white flex items-center justify-center mb-4 shadow-lg group-hover:scale-110 transition-transform">
            <span class="material-icons text-4xl">directions_car</span>
          </div>
          <h2 class="text-xl font-bold text-indigo-800 dark:text-indigo-200">Drive Services</h2>
          <p class="text-indigo-600 dark:text-indigo-300 mt-1 text-sm">Get there fast.</p>
        </div>
      </div>

      <div onclick="openVideo('Shopping')" class="card animate-card-bounce-in card-shadow rounded-3xl bg-gradient-to-br from-red-100 to-red-200 dark:from-red-900/50 dark:to-red-800/50 p-6 flex flex-col items-start justify-between cursor-pointer group">
        <div>
          <div class="w-16 h-16 rounded-2xl bg-red-500 text-white flex items-center justify-center mb-4 shadow-lg group-hover:scale-110 transition-transform">
            <span class="material-icons text-4xl">shopping_bag</span>
          </div>
          <h2 class="text-xl font-bold text-red-800 dark:text-red-200">Shopping</h2>
          <p class="text-red-600 dark:text-red-300 mt-1 text-sm">Discover products.</p>
        </div>
      </div>

      <div onclick="openVideo('Explore')" class="card animate-card-bounce-in card-shadow rounded-3xl bg-gradient-to-br from-yellow-100 to-yellow-200 dark:from-yellow-900/50 dark:to-yellow-800/50 p-6 flex flex-col items-start justify-between cursor-pointer group">
        <div>
          <div class="w-16 h-16 rounded-2xl bg-yellow-500 text-white flex items-center justify-center mb-4 shadow-lg group-hover:scale-110 transition-transform">
            <span class="material-icons text-4xl">explore</span>
          </div>
          <h2 class="text-xl font-bold text-yellow-800 dark:text-yellow-200">Explore</h2>
          <p class="text-yellow-600 dark:text-yellow-300 mt-1 text-sm">Uncover hidden gems.</p>
        </div>
      </div>

      <div onclick="openVideo('Recipes')" class="card animate-card-bounce-in card-shadow rounded-3xl bg-gradient-to-br from-cyan-100 to-cyan-200 dark:from-cyan-900/50 dark:to-cyan-800/50 p-6 flex flex-col items-start justify-between cursor-pointer group">
        <div>
          <div class="w-16 h-16 rounded-2xl bg-cyan-500 text-white flex items-center justify-center mb-4 shadow-lg group-hover:scale-110 transition-transform">
            <span class="material-icons text-4xl">menu_book</span>
          </div>
          <h2 class="text-xl font-bold text-cyan-800 dark:text-cyan-200">Recipes</h2>
          <p class="text-cyan-600 dark:text-cyan-300 mt-1 text-sm">Inspire your cooking.</p>
        </div>
      </div>
    </div>
  </main>
</div>

<div id="videoOverlay" class="overlay">
    <div class="overlay-content">
        <div id="videoWrapper">
            <video id="promoVideo" playsinline>
                Your browser does not support HTML5 video.
            </video>
        </div>
        <div id="messageContainer">
            <div id="dynamicTitle">MODULE NAME</div>
            <p class="sub-text">We are currently building this feature. It will be live very soon!</p>
            <button class="action-btn btn-close" onclick="closeVideo()">Go Back</button>
            <button class="action-btn btn-replay" onclick="replayVideo()">Replay</button>
        </div>
    </div>
</div>

<script>
// ===============================================
// 1. UNIVERSAL AUTH & REDIRECT LOGIC
// ===============================================
(function(){
  const navArea = document.getElementById('navAuthArea');
  const userData = JSON.parse(sessionStorage.getItem('zzz_user') || localStorage.getItem('zzz_user') || 'null');

  if(userData){
    // LOGGED IN STATE
    document.getElementById('welcomeTitle').textContent = `Welcome back, ${userData.name}!`;
    
    // Check Role for Redirects
    let dashboardLink = 'Seller Dashboard.html'; // Default for user
    let roleBadge = '';

    if(userData.role === 'admin' || userData.role === 'super_admin') {
       dashboardLink = 'AdminConsoleV2.html';
       roleBadge = '<span class="bg-red-500 text-white text-xs px-2 py-0.5 rounded-full ml-2">ADMIN</span>';
    }

    navArea.innerHTML = `
      <div class="flex items-center gap-3">
        <a href="${dashboardLink}" class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 transition-colors">
          <div class="bg-primary/10 rounded-full w-8 h-8 flex items-center justify-center text-primary font-bold shadow-sm">
            ${userData.name.charAt(0).toUpperCase()}
          </div>
          <span class="font-semibold text-sm text-gray-700 dark:text-white hidden md:block">${userData.name}</span>
          ${roleBadge}
        </a>
        <button id="logoutBtn" class="text-sm font-bold text-red-500 hover:text-red-700 transition-colors">Logout</button>
      </div>
    `;

    document.getElementById('logoutBtn').addEventListener('click', ()=>{
      // Universal Logout Logic
      sessionStorage.removeItem('zzz_user');
      localStorage.removeItem('zzz_user');
      window.location.reload(); // Refresh to show login state
    });

  } else {
    // GUEST STATE
    navArea.innerHTML = `
      <a href="Login Page.html?redirect=dashboard.html" class="px-4 py-2 text-sm font-bold text-gray-600 hover:text-primary transition-colors">Log In</a>
      <a href="User Registration.html" class="px-5 py-2 bg-primary text-white rounded-full text-sm font-bold shadow hover:bg-orange-600 hover:-translate-y-0.5 transition-all">Sign Up</a>
    `;
    document.getElementById('welcomeTitle').textContent = 'Welcome to ZipZapZoi!';
  }
})();

// ===============================================
// 2. VIDEO OVERLAY LOGIC
// ===============================================
const videoPaths = {
    'Food Delivery': 'Assets/ZipZapZoi1.mp4',
    'Drive Services': 'Assets/ZIpZapZoi3.mp4',
    'Shopping': 'Assets/ZIpZapZoi5.mp4',
    'Explore': 'Assets/ZipZapZoi2.mp4',
    'Recipes': 'Assets/ZIpZapZoi4.mp4'
};

const overlay = document.getElementById("videoOverlay");
const videoWrapper = document.getElementById("videoWrapper");
const messageContainer = document.getElementById("messageContainer");
const video = document.getElementById("promoVideo");
const titleText = document.getElementById("dynamicTitle");

function openVideo(moduleName) {
    const videoFile = videoPaths[moduleName];
    if(!videoFile) {
        alert("Video not found: " + moduleName);
        return;
    }

    video.src = videoFile;
    video.load();

    videoWrapper.style.display = "flex";
    messageContainer.style.display = "none";
    titleText.innerText = moduleName + " COMING SOON";
    overlay.style.display = "flex";
    
    video.currentTime = 0;
    video.play().catch(e => console.log("Autoplay blocked:", e));
}

video.addEventListener('ended', function() {
    videoWrapper.style.display = "none";
    messageContainer.style.display = "block";
});

function closeVideo() {
    overlay.style.display = "none";
    video.pause();
    video.src = "";
}

function replayVideo() {
    videoWrapper.style.display = "flex";
    messageContainer.style.display = "none";
    video.currentTime = 0;
    video.play();
}
</script>

</body>
</html>