/* boot.js — single include loader (nav + auth + logout) */
(function(){
  function loadScript(src, cb){
    const s = document.createElement('script'); s.src = src; s.defer = true;
    s.onload = ()=> cb && cb();
    s.onerror = ()=> cb && cb(new Error('failed to load '+src));
    document.head.appendChild(s);
  }

  // 1. Attach nav placeholder injection for pages that used it
  document.querySelectorAll('[data-include="scripts/components/nav.html"]').forEach(el=>{
    // keep placeholder; auth.js will replace it when ready
    el.innerHTML = '<div style="opacity:.0">Loading nav...</div>';
  });

  // 2. Load auth and logout scripts (order matters)
  loadScript('scripts/auth.js', ()=> {
    loadScript('scripts/logout.js', ()=> {
      // done — nothing else needed here
      console.log('boot: auth & logout loaded');
    });
  });

  // 3. Optional: expose small helper to inject nav manually
  window.ZipZapBoot = { injectNavs: () => { document.querySelectorAll('[data-include="scripts/components/nav.html"]').forEach(n=>n.innerHTML=''); } };
})();
