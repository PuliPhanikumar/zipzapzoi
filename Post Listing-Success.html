<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Listing Posted Successfully - ZipZapZoi</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
</head>

<body class="font-display bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark flex items-center justify-center min-h-screen p-6">
  <div class="max-w-md w-full text-center bg-white dark:bg-gray-800 rounded-2xl shadow-bouncy-lg p-8">
    
    <!-- Success icon -->
    <span class="material-symbols-outlined text-green-500 text-6xl mb-4">check_circle</span>
    
    <!-- Title & message -->
    <h1 class="text-2xl font-bold mb-3">Listing Posted Successfully!</h1>
    <p class="text-text-muted-light dark:text-text-muted-dark mb-8">
      Your listing is now live on ZipZapZoi Classifieds.
    </p>

    <!-- âœ… Single functional button -->
    <a id="returnLink"
       href="Seller Dashboard.html"
       class="inline-flex items-center justify-center w-full px-6 py-3 bg-primary text-white font-semibold rounded-full shadow hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 mb-4">
      <span class="material-symbols-outlined mr-2">arrow_back</span>
      <span id="returnText">Back to Dashboard</span>
    </a>

    <!-- Secondary link -->
    <a href="classifieds.html"
       class="block text-secondary font-semibold hover:underline">
       View My Listing
    </a>
  </div>

  <script>
  // Detect where user came from and update button text + link
  (function(){
    const ref = sessionStorage.getItem('zzz_post_referrer');
    const link = document.getElementById('returnLink');
    const text = document.getElementById('returnText');

    if (ref && ref.toLowerCase().includes('classified')) {
      link.href = 'classifieds.html';
      text.textContent = 'Back to Classifieds';
    } 
    else if (ref && ref.toLowerCase().includes('dashboard')) {
      link.href = 'Seller Dashboard.html';
      text.textContent = 'Back to Dashboard';
    } 
    else {
      link.href = 'dashboard.html';
      text.textContent = 'Back to Home';
    }
  })();
  </script>
  <script>
(function(){
  const ref = sessionStorage.getItem('zzz_post_referrer');
  const link = document.getElementById('returnLink');
  const text = document.getElementById('returnText');
  const smallLink = document.querySelector('a[href="classifieds.html"]'); // the small "View My Listing" link

  // Primary: set returnLink destination by referrer (dashboard/classifieds)
  if (ref && ref.toLowerCase().includes('classified')) {
    link.href = 'classifieds.html';
    text.textContent = 'Back to Classifieds';
  } else if (ref && ref.toLowerCase().includes('dashboard')) {
    link.href = 'Seller Dashboard.html';
    text.textContent = 'Back to Dashboard';
  } else {
    link.href = 'dashboard.html';
    text.textContent = 'Back to Home';
  }

  // Secondary: if a new listing was just created, point both button and small link to it
  const listingUrl = sessionStorage.getItem('zzz_new_listing_url');
  const listingSlug = sessionStorage.getItem('zzz_new_listing_slug');

  if (listingUrl) {
    // set small link and optionally the main button to view the listing instead of return
    smallLink.href = listingUrl;
    // optionally change the main button to take user directly to their listing:
    // link.href = listingUrl;
    // text.textContent = 'View My Listing';
  } else if (listingSlug) {
    const url = `Listing Detail.html?slug=${encodeURIComponent(listingSlug)}`;
    smallLink.href = url;
    // link.href = url; // optional: make the main button go to the listing
    // text.textContent = 'View My Listing';
  } else {
    // leave smallLink as classifieds.html (fallback)
  }

  // Optional: clear sessionStorage keys to avoid stale links later
  // sessionStorage.removeItem('zzz_new_listing_url');
  // sessionStorage.removeItem('zzz_new_listing_slug');

})();
</script>
<script src="scripts/auth.js"></script>
<script src="scripts/boot.js"></script>
</body>
</html>
